{% extends 'anamnese/base.html' %}

{% block title %}Editar Ficha de {{ ficha.nome }}{% endblock %}

{% block content %}
<h1 class="page-header">
    <i class="fas fa-edit"></i> Editar Ficha de Anamnese
</h1>

<div class="alert alert-info">
    <i class="fas fa-info-circle"></i> Você está editando a ficha de <strong>{{ ficha.nome }}</strong>
</div>

<form method="post" class="needs-validation" novalidate>
    {% csrf_token %}
    
    <!-- Dados Pessoais -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="fas fa-user"></i> Dados Pessoais</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="{{ form.nome.id_for_label }}" class="form-label">{{ form.nome.label }}</label>
                    {{ form.nome }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.data_nascimento.id_for_label }}" class="form-label">{{ form.data_nascimento.label }}</label>
                    {{ form.data_nascimento }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.idade.id_for_label }}" class="form-label">{{ form.idade.label }}</label>
                    {{ form.idade }}
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="{{ form.sexo.id_for_label }}" class="form-label">{{ form.sexo.label }}</label>
                    {{ form.sexo }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.telefone.id_for_label }}" class="form-label">{{ form.telefone.label }}</label>
                    {{ form.telefone }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                    {{ form.email }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.profissao.id_for_label }}" class="form-label">{{ form.profissao.label }}</label>
                    {{ form.profissao }}
                </div>
            </div>
        </div>
    </div>

    <!-- Dados Antropométricos -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0"><i class="fas fa-weight"></i> Dados Antropométricos</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="{{ form.peso_atual.id_for_label }}" class="form-label">{{ form.peso_atual.label }}</label>
                    {{ form.peso_atual }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.altura.id_for_label }}" class="form-label">{{ form.altura.label }}</label>
                    {{ form.altura }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.peso_desejado.id_for_label }}" class="form-label">{{ form.peso_desejado.label }}</label>
                    {{ form.peso_desejado }}
                </div>
                <div class="col-md-3 mb-3">
                    <label for="{{ form.objetivo.id_for_label }}" class="form-label">{{ form.objetivo.label }}</label>
                    {{ form.objetivo }}
                </div>
            </div>
        </div>
    </div>

    <!-- História Clínica -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0"><i class="fas fa-notes-medical"></i> História Clínica</h5>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="{{ form.patologias.id_for_label }}" class="form-label">{{ form.patologias.label }}</label>
                {{ form.patologias }}
            </div>
            <div class="mb-3">
                <label for="{{ form.medicamentos.id_for_label }}" class="form-label">{{ form.medicamentos.label }}</label>
                {{ form.medicamentos }}
            </div>
            <div class="mb-3">
                <label for="{{ form.alergias_intolerancia.id_for_label }}" class="form-label">{{ form.alergias_intolerancia.label }}</label>
                {{ form.alergias_intolerancia }}
            </div>
        </div>
    </div>

    <!-- Estilo de Vida -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0"><i class="fas fa-running"></i> Estilo de Vida</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="{{ form.nivel_atividade.id_for_label }}" class="form-label">{{ form.nivel_atividade.label }}</label>
                    {{ form.nivel_atividade }}
                </div>
                <div class="col-md-4 mb-3">
                    <label for="{{ form.refeicoes_dia.id_for_label }}" class="form-label">{{ form.refeicoes_dia.label }}</label>
                    {{ form.refeicoes_dia }}
                </div>
                <div class="col-md-4 mb-3">
                    <label for="{{ form.consumo_agua.id_for_label }}" class="form-label">{{ form.consumo_agua.label }}</label>
                    {{ form.consumo_agua }}
                </div>
            </div>
            <div class="mb-3">
                <label for="{{ form.restricoes_alimentares.id_for_label }}" class="form-label">{{ form.restricoes_alimentares.label }}</label>
                {{ form.restricoes_alimentares }}
            </div>
        </div>
    </div>

    <!-- Observações -->
    <div class="card mb-4">
        <div class="card-header bg-secondary text-white">
            <h5 class="mb-0"><i class="fas fa-clipboard"></i> Observações</h5>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label for="{{ form.observacoes.id_for_label }}" class="form-label">{{ form.observacoes.label }}</label>
                {{ form.observacoes }}
            </div>
        </div>
    </div>

    <!-- Botões -->
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <a href="{% url 'visualizar_ficha' ficha.id %}" class="btn btn-secondary btn-lg">
            <i class="fas fa-times"></i> Cancelar
        </a>
        <button type="submit" class="btn btn-warning btn-lg">
            <i class="fas fa-save"></i> Salvar Alterações
        </button>
    </div>
</form>
{% endblock %}
